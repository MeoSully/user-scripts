(function(){const a={getDtsg(){try{return require("DTSGInitialData").token}catch(b){return document.getElementsByName("fb_dtsg")[0].value}},getGroupId(){return document.querySelector("div[class='_4-u2 _hoc clearfix _4adj _4-u8']").getAttribute("id").split("_")[1]},getUserId(){try{return require("CurrentUserInitialData").USER_ID}catch(b){return document.cookie.match(/c_user=([0-9]+)/)[1]}},data(){return this.fbDtsg=this.getDtsg(),this.groupId=this.getGroupId(),this.userId=this.getUserId(),this},async request(b,c="GET",d,f=300){return new Promise(function(g){setTimeout(async function(){var i;i="GET"===c?await fetch(b):await fetch(b,{method:c,body:d}),g(i)},f)})},async getAccessToken(){var b=new FormData;b.append("fb_dtsg",this.fbDtsg),b.append("app_id","165907476854626"),b.append("redirect_uri","fbconnect://success"),b.append("display","page"),b.append("access_token",""),b.append("from_post",1),b.append("return_format","access_token"),b.append("domain",""),b.append("sso_device","ios"),b.append("__CONFIRM__",1),b.append("__user",this.userId);var c=await this.request("https://www.facebook.com/v1.0/dialog/oauth/confirm","POST",b,0),d=await c.text();return d.match(/access_token=(.*)(?=&expires_in)/)[1]},async invertFriends(b){async function c(h){var i=new FormData;i.append("fb_dtsg",g.fbDtsg),i.append("message_id","groupsAddMemberCompletionMessage"),i.append("message",""),i.append("__user",g.userId);var j="";if(await h.data.forEach(function(m,n){i.append(`members[${n}]`,`${m.id}`),i.append(`text_members[${n}]`,`${m.name}`),j+=`${m.name}, `}),await g.request(`https://www.facebook.com/ajax/groups/members/add_post/?group_id=${g.groupId}&ref=members&source=typeahead&dpr=1`,"POST",i,500),console.log(`Đã mời ${j} tham gia nhóm !`),!h.paging.next)return console.log("Xong");var k=await g.request(h.paging.next),l=await k.json();await c(l)}var d=await this.request(`https://graph.facebook.com/v3.1/${this.userId}/friends?access_token=${b}&pretty=1&limit=10`),f=await d.json(),g=this;await c(f)},run(){this.getAccessToken().then(b=>this.invertFriends(b)).then(b=>console.log(b))}};a.data().run()})();
